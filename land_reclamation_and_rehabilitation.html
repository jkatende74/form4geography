<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Land Reclamation & Rehabilitation Guide</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <script>
        MathJax = {
          tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']],
            displayMath: [['$$', '$$'], ['\\[', '\\]']]
          },
          svg: {
            fontCache: 'global'
          }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        /* General Body Styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: #f8f9fa; /* Light gray background */
            color: #333;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Wrapper for sidebar and page content */
        #wrapper {
            display: flex;
            width: 100%;
            align-items: stretch;
            min-height: 100vh; /* Ensure wrapper takes full viewport height */
        }

        /* Sidebar Styles */
        #sidebar-wrapper {
            min-height: 100vh;
            width: 280px; /* Increased width for better readability */
            background-color: #f8f9fa; /* Bootstrap light gray */
            border-right: 1px solid #dee2e6; /* Bootstrap border color */
            transition: margin-left 0.25s ease-out;
            position: fixed; /* Fixed position */
            top: 0;
            left: 0;
            bottom: 0;
            z-index: 1030; /* Ensure sidebar is above most content */
            overflow-y: auto; /* Allow scrolling within sidebar */
        }

        .sidebar-heading {
            font-size: 1.25rem;
            font-weight: bold;
            color: #0056b3; /* Darker blue for heading */
            display: flex;
            align-items: center;
        }

        #sidebar-nav .list-group-item {
            border: none; /* Remove default borders */
            padding: 0.75rem 1.25rem;
            font-size: 0.95rem;
            color: #495057; /* Bootstrap muted text color */
            background-color: transparent; /* Ensure no background color by default */
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
        }

        #sidebar-nav .list-group-item:hover,
        #sidebar-nav .list-group-item:focus {
            background-color: #e9ecef; /* Lighter gray for hover */
            color: #0056b3; /* Darker blue on hover */
            text-decoration: none;
        }

        #sidebar-nav .list-group-item.active {
            background-color: #007bff; /* Bootstrap primary blue */
            color: white;
            font-weight: 500;
            border-left: 3px solid #0056b3; /* Accent for active item */
            padding-left: calc(1.25rem - 3px); /* Adjust padding for border */
        }

        /* Sub-level navigation (if any) */
        #sidebar-nav .sub-menu .list-group-item {
            padding-left: 2.5rem; /* Indent sub-items */
            font-size: 0.9rem;
        }

        /* Page Content Wrapper Styles */
        #page-content-wrapper {
            flex: 1;
            padding-left: 280px; /* Same as sidebar width */
            transition: padding-left 0.25s ease-out;
            display: flex;
            flex-direction: column;
            min-width: 0; /* Important for flexbox to prevent overflow */
        }

        /* Toggled state for sidebar */
        #wrapper.toggled #sidebar-wrapper {
            margin-left: -280px; /* Hide sidebar */
        }

        #wrapper.toggled #page-content-wrapper {
            padding-left: 0; /* Expand content area when sidebar is hidden */
        }

        /* Mobile Styles for Sidebar */
        @media (max-width: 991.98px) { /* lg breakpoint */
            #sidebar-wrapper {
                margin-left: -280px; /* Hidden by default on mobile */
                position: fixed; /* Ensure it overlays on mobile */
                height: 100%;
                z-index: 1040; /* Higher z-index for mobile overlay */
            }

            #wrapper.toggled #sidebar-wrapper {
                margin-left: 0; /* Show sidebar when toggled */
            }

            #page-content-wrapper {
                padding-left: 0; /* Full width on mobile */
            }
        }

        /* Top Navigation Bar */
        .navbar {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #menu-toggle {
            border: 1px solid #007bff;
            color: #007bff;
        }
        #menu-toggle:hover {
            background-color: #007bff;
            color: white;
        }

        /* Breadcrumb Styles */
        .breadcrumb {
            background-color: transparent;
            padding: 0.5rem 0;
            font-size: 0.9rem;
        }
        .breadcrumb-item a {
            color: #007bff;
            text-decoration: none;
        }
        .breadcrumb-item a:hover {
            text-decoration: underline;
        }
        .breadcrumb-item.active {
            color: #6c757d; /* Bootstrap muted color */
        }

        /* Main Content Area */
        #content-area {
            background-color: #ffffff;
            border-radius: 0.375rem; /* Bootstrap rounded-lg */
            min-height: calc(100vh - 150px); /* Adjust based on header/footer height */
        }

        #content-area h1, #content-area h2, #content-area h3, #content-area h4, #content-area h5 {
            color: #0056b3; /* Darker blue for headings */
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        #content-area h1 { font-size: 2rem; border-bottom: 2px solid #e9ecef; padding-bottom: 0.5rem;}
        #content-area h2 { font-size: 1.75rem; }
        #content-area h3 { font-size: 1.5rem; }
        #content-area h4 { font-size: 1.25rem; }

        #content-area p {
            margin-bottom: 1rem;
            color: #495057;
        }

        #content-area ul, #content-area ol {
            margin-bottom: 1rem;
            padding-left: 1.5rem; /* Indent lists */
        }
        #content-area li {
            margin-bottom: 0.5rem;
        }

        /* Diagram Placeholder Styles */
        .diagram-placeholder {
            border: 2px dashed #6c757d; /* Dashed border */
            background-color: #f8f9fa; /* Light background */
            padding: 2rem;
            text-align: center;
            margin: 1.5rem 0;
            border-radius: 0.25rem;
            color: #6c757d;
        }
        .diagram-placeholder img {
            max-width: 100%;
            height: auto;
            margin-bottom: 0.5rem;
        }

        /* Revision Question Styles */
        .revision-question-item {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
            margin-bottom: 1rem;
        }

        .revision-question-header {
            padding: 0.75rem 1.25rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
            color: #0056b3;
        }
        .revision-question-header:hover {
            background-color: #e9ecef;
        }

        .revision-answer {
            padding: 1.25rem;
            border-top: 1px solid #dee2e6;
            background-color: #fff;
        }

        /* MathJax Scaling for Mobile */
        .MathJax_Display { /* For MathJax v2 */
            overflow-x: auto;
            overflow-y: hidden;
            max-width: 100%;
        }
        mjx-container[jax="CHTML"][display="true"] { /* For MathJax v3 */
            display: block;
            overflow-x: auto;
            overflow-y: hidden;
            max-width: 100%;
        }


        /* Navigation Buttons */
        #navigation-buttons button {
            min-width: 100px;
        }

        /* Footer */
        footer {
            font-size: 0.9rem;
        }

        /* Accessibility: Focus visible for keyboard navigation */
        :focus-visible {
          outline: 2px solid #007bff;
          outline-offset: 2px;
          box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.25);
        }
        .btn:focus-visible, .list-group-item:focus-visible {
          outline: 2px solid #007bff !important; /* Ensure Bootstrap focus doesn't override */
          outline-offset: 2px !important;
          box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.25) !important;
        }
    </style>
</head>
<body>
    <div class="d-flex" id="wrapper">
        <nav class="bg-light border-end" id="sidebar-wrapper">
            <div class="sidebar-heading border-bottom bg-light p-3">
                <img src="https://placehold.co/30x30/007bff/white?text=LR" alt="Guide Logo" class="me-2 rounded"> Guide Menu
            </div>
            <div class="list-group list-group-flush" id="sidebar-nav">
                </div>
        </nav>
        <div id="page-content-wrapper">
            <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom sticky-top">
                <div class="container-fluid">
                    <button class="btn btn-primary d-lg-none" id="menu-toggle">â˜° Menu</button>
                    <nav aria-label="breadcrumb" class="ms-3 flex-grow-1">
                        <ol class="breadcrumb mb-0" id="breadcrumb-trail">
                            </ol>
                    </nav>
                </div>
            </nav>
            <main class="container-fluid p-4">
                <div id="content-area" class="bg-white p-4 rounded shadow-sm">
                    <h1 id="main-title">Welcome</h1>
                    <p>Select a topic from the menu to begin.</p>
                </div>

                <div class="d-flex justify-content-between mt-4" id="navigation-buttons">
                    <button class="btn btn-outline-secondary" id="prev-button" disabled>&laquo; Previous</button>
                    <button class="btn btn-outline-primary" id="next-button" disabled>Next &raquo;</button>
                </div>
            </main>
            <footer class="bg-light text-center text-muted p-3 mt-auto border-top">
                <p class="mb-0">&copy; 2025 Land Reclamation & Rehabilitation Guide</p>
            </footer>
            </div>
        </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // content.js - Stores the learning guide material
        const guideData = [
            {
                id: "intro",
                title: "Introduction",
                breadcrumb: "Introduction",
                content: `
                    <h2>1. Introduction</h2>
                    <p>Land is one of our most precious natural resources. It's where we grow our food, build our homes, and where diverse ecosystems thrive. However, not all land is immediately usable, and some land becomes damaged over time. <strong>Land reclamation</strong> and <strong>land rehabilitation</strong> are two important processes that geographers study, focusing on how humans can make land more productive or restore its health. Understanding these processes is crucial for sustainable development, especially in a country like Kenya with diverse landscapes and growing needs.</p>
                    <p>This guide will explore:</p>
                    <ul>
                        <li>The definitions of land reclamation and rehabilitation.</li>
                        <li>Why these processes are important.</li>
                        <li>The various methods used in both reclamation and rehabilitation.</li>
                        <li>Key case studies from Kenya and around the world.</li>
                        <li>The challenges and benefits associated with these activities.</li>
                    </ul>
                `
            },
            {
                id: "definitions",
                title: "Defining Key Terms",
                breadcrumb: "Definitions",
                content: `
                    <h2>2. Defining Land Reclamation and Land Rehabilitation</h2>
                    <p>It's important to understand the difference between these two terms, as they are often covered in KCSE examinations.</p>
                    
                    <h3>Land Reclamation</h3>
                    <ul>
                        <li><strong>Definition:</strong> Land reclamation is the process of converting unproductive land (often called wasteland) into land that can be used for productive purposes like farming (growing crops and keeping animals), settlement, or industry.</li>
                        <li><strong>Examples of Wasteland:</strong> This can include swamps and marshes (too wet), arid and semi-arid areas (too dry), land covered by water (like parts of a lake or sea), or land prone to frequent flooding.</li>
                        <li><strong>Goal:</strong> To create <em>new</em> usable land where it was previously difficult or impossible to use.</li>
                        <li><em>(Source: Based on KCSE University Express; Geography Notes Form 4)</em></li>
                    </ul>
                    <div class="diagram-placeholder">
                        <img src="https://placehold.co/600x300/e9ecef/6c757d?text=Diagram:+Area+Before+Reclamation+(e.g.,+Swamp)" alt="Diagram: Area Before Reclamation (e.g., Swamp)">
                        <p>Conceptual diagram showing a swampy/unproductive area before reclamation.</p>
                    </div>
                    <div class="diagram-placeholder">
                        <img src="https://placehold.co/600x300/e9ecef/6c757d?text=Diagram:+Same+Area+After+Reclamation+(e.g.,+Farmland)" alt="Diagram: Same Area After Reclamation (e.g., Farmland)">
                        <p>Conceptual diagram showing the same area transformed into usable farmland after reclamation.</p>
                    </div>

                    <h3>Land Rehabilitation</h3>
                    <ul>
                        <li><strong>Definition:</strong> Land rehabilitation is the process of restoring land that has been damaged or degraded by human activities or natural disasters back to a useful and productive state.</li>
                        <li><strong>Examples of Degraded Land:</strong> This includes land damaged by mining or quarrying, deforestation, overgrazing, soil erosion, or pollution.</li>
                        <li><strong>Goal:</strong> To <em>repair and restore</em> previously productive land, improving its quality and ability to support life or economic activities.</li>
                        <li><em>(Source: Based on KCSE University Express; Geography Notes Form 4)</em></li>
                    </ul>
                    <div class="diagram-placeholder">
                        <img src="https://placehold.co/600x300/e9ecef/6c757d?text=Diagram:+Degraded+Land+(e.g.,+Old+Quarry)" alt="Diagram: Degraded Land (e.g., Old Quarry)">
                        <p>Conceptual diagram showing a degraded area like an abandoned quarry.</p>
                    </div>
                    <div class="diagram-placeholder">
                        <img src="https://placehold.co/600x300/e9ecef/6c757d?text=Diagram:+Same+Area+After+Rehabilitation+(e.g.,+Park)" alt="Diagram: Same Area After Rehabilitation (e.g., Park/Forest)">
                        <p>Conceptual diagram showing the quarry rehabilitated into a park or reforested area.</p>
                    </div>

                    <h4>Key Distinction for KCSE:</h4>
                    <ul>
                        <li><strong>Reclamation</strong> = Making <em>unproductive</em> land productive (often creating "new" usable land).</li>
                        <li><strong>Rehabilitation</strong> = Restoring <em>damaged/degraded</em> land back to a productive state.</li>
                    </ul>
                `
            },
            {
                id: "importance",
                title: "Importance of Reclamation & Rehabilitation",
                breadcrumb: "Importance",
                content: `
                    <h2>3. Reasons for/Importance of Land Reclamation and Rehabilitation</h2>
                    <p>These processes are undertaken for several critical reasons, many of which are highly relevant to Kenya:</p>
                    <ol>
                        <li><strong>To Increase Food Production:</strong>
                            <ul>
                                <li>With a growing population, there's a constant need for more food. Reclaiming land (e.g., by irrigating dry areas or draining swamps) makes more land available for farming crops and raising livestock. This helps to feed the population and improve food security. <em>(Source: Geography Notes Form 4; KCSE University Express)</em></li>
                            </ul>
                        </li>
                        <li><strong>To Provide Land for Settlement:</strong>
                            <ul>
                                <li>As populations grow, especially in urban areas, more land is needed for housing and associated infrastructure. Reclaimed or rehabilitated land can provide this space, easing population pressure on existing settlements.</li>
                            </ul>
                        </li>
                        <li><strong>To Overcome Land Shortage and Pressure:</strong>
                            <ul>
                                <li>In many parts of Kenya, good agricultural land is scarce, and there's high population pressure on available resources. Reclamation and rehabilitation can make more land available, reducing this pressure. <em>(Source: Geography Notes Form 4)</em></li>
                            </ul>
                        </li>
                        <li><strong>To Restore Derelict Land:</strong>
                            <ul>
                                <li>Activities like mining and quarrying can leave behind ugly and dangerous pits or waste heaps. Rehabilitation (e.g., by filling these pits and planting trees) makes the land safe, usable, and improves the scenery. <em>(Source: Geography Notes Form 4)</em></li>
                            </ul>
                        </li>
                        <li><strong>For Environmental Conservation:</strong>
                            <ul>
                                <li><strong>Rehabilitation</strong> helps control soil erosion (e.g., by planting trees on bare slopes), protects water catchment areas, restores habitats for wildlife, and can help combat desertification.</li>
                                <li>Carefully planned <strong>reclamation</strong> (e.g., creating artificial wetlands) can also have environmental benefits, though poorly planned projects can be harmful.</li>
                            </ul>
                        </li>
                        <li><strong>To Control Pests and Diseases:</strong>
                            <ul>
                                <li>Swamps and stagnant water bodies can be breeding grounds for pests like mosquitoes (which spread malaria) and tsetse flies (which spread sleeping sickness and nagana in animals). Draining such areas (a form of reclamation) can help control these pests and diseases. <em>(Source: Geography Notes Form 4)</em></li>
                            </ul>
                        </li>
                        <li><strong>For Economic Development:</strong>
                            <ul>
                                <li>Reclaimed and rehabilitated land can be used for various economic activities like farming, industry, tourism, or forestry. This creates jobs, generates income, and contributes to the overall development of a region or country.</li>
                            </ul>
                        </li>
                        <li><strong>To Improve Aesthetic Value:</strong>
                            <ul>
                                <li>Rehabilitating degraded landscapes (like old mines or garbage dumps) makes them look better and more pleasant to live near.</li>
                            </ul>
                        </li>
                    </ol>
                `
            },
            {
                id: "reclamation-methods",
                title: "Methods of Land Reclamation",
                breadcrumb: "Reclamation Methods",
                content: `
                    <h2>4. Methods of Land Reclamation</h2>
                    <p>Different methods are used depending on the type of wasteland being reclaimed.</p>

                    <h3>4.1 Draining of Swamps and Marshlands</h3>
                    <p>Swamps are waterlogged areas that are often unsuitable for agriculture or settlement.</p>
                    <ul>
                        <li><strong>Objective:</strong> To remove excess water to lower the water table.</li>
                        <li><strong>Techniques:</strong>
                            <ul>
                                <li><strong>Digging Open Ditches/Canals:</strong> These channels allow water to flow away from the swampy area by gravity. This is a common method used in Kenya. <em>(Source: Geography Notes Form 4; Ogoti- Land Reclamation and Rehabilitation)</em></li>
                                <li><strong>Planting Water-Absorbent Trees:</strong> Trees like Eucalyptus have high water uptake rates and can be planted around swamps to help dry them out (e.g., at Kakuzi in Makuyu). <em>(Source: Geography Notes Form 4)</em></li>
                                <li><strong>Laying Perforated Pipes:</strong> Pipes with small holes are laid in ditches. Water seeps into these pipes and is drained away. <em>(Source: Geography Notes Form 4)</em></li>
                                <li><strong>Pumping Water:</strong> In some situations, pumps are used to remove water from the area.</li>
                            </ul>
                        </li>
                        <li><strong>Examples in Kenya:</strong>
                            <ul>
                                <li><strong>Yala Swamp (Siaya and Busia Counties):</strong> Parts of this large swamp on the lower course of the River Yala have been drained for agriculture (e.g., rice, sugarcane). <em>(Source: Geography Notes Form 4)</em></li>
                                <li><strong>Bunyala Swamp (Busia County):</strong> Located on the lower course of the River Nzoia, this area has also seen drainage projects for rice cultivation. <em>(Source: Geography Notes Form 4)</em></li>
                            </ul>
                        </li>
                    </ul>
                    <div class="diagram-placeholder">
                        <img src="https://placehold.co/600x300/e9ecef/6c757d?text=Diagram:+Swamp+Drainage+Techniques" alt="Diagram: Swamp Drainage Techniques (Ditches, Eucalyptus, Pipes)">
                        <p>Illustrating methods like digging ditches, planting eucalyptus, and laying perforated pipes for swamp drainage.</p>
                    </div>

                    <h3>4.2 Irrigation of Arid and Semi-Arid Lands (ASALs)</h3>
                    <p>ASALs receive little or unreliable rainfall, making farming difficult without irrigation.</p>
                    <ul>
                        <li><strong>Objective:</strong> To artificially supply water to dry lands to support crop growth and pasture development.</li>
                        <li><strong>Common Irrigation Methods in Kenya:</strong>
                            <ul>
                                <li><strong>Water Lifting Method:</strong> Using simple tools like buckets or watering cans to lift water from a source (river, well) and pour it onto crops. Common in small-scale market gardening. <em>(Source: Geography Notes Form 4)</em></li>
                                <li><strong>Flood/Basin Irrigation:</strong> Diverting river water into canals, which then flood entire plots of land. Used in large schemes like Mwea for rice. <em>(Source: Geography Notes Form 4)</em>. Formula for water needed might be complex, but basic concept is area coverage: $$\\text{Volume} = \\text{Area} \\times \\text{Depth}$$</li>
                                <li><strong>Sprinkler/Overhead Irrigation:</strong> Water is pumped through pipes and sprayed over crops using rotating sprinklers. Used for various crops on larger farms. <em>(Source: Geography Notes Form 4)</em></li>
                                <li><strong>Drip/Trickle Irrigation:</strong> Water is supplied slowly and directly to the base of each plant through pipes with small outlets (emitters). Very efficient in water use, good for high-value crops in dry areas. <em>(Source: Ogoti- Land Reclamation and Rehabilitation)</em></li>
                                <li><strong>Canal/Furrow Irrigation:</strong> Water flows from a main canal into smaller channels (furrows) made between crop rows. <em>(Source: Ogoti- Land Reclamation and Rehabilitation)</em></li>
                            </ul>
                        </li>
                        <li><strong>Examples in Kenya:</strong> (Covered in more detail in Case Studies)
                            <ul>
                                <li>Mwea Irrigation Scheme (Kirinyaga County)</li>
                                <li>Perkerra Irrigation Scheme (Baringo County)</li>
                                <li>Bura and Hola Irrigation Schemes (Tana River County)</li>
                            </ul>
                        </li>
                    </ul>
                    <div class="diagram-placeholder">
                         <img src="https://placehold.co/600x300/e9ecef/6c757d?text=Diagram:+Types+of+Irrigation" alt="Diagram: Types of Irrigation (Sprinkler, Drip, Furrow)">
                        <p>Illustrating different irrigation methods like sprinkler, drip, and furrow irrigation.</p>
                    </div>

                    <h3>4.3 Control of Pests (e.g., Tsetse Flies)</h3>
                    <p>Some areas are unproductive because they are infested with pests that affect humans or livestock.</p>
                    <ul>
                        <li><strong>Objective:</strong> To eradicate or control pests to make land safe and productive.</li>
                        <li><strong>Techniques for Tsetse Fly Control:</strong>
                            <ul>
                                <li><strong>Bush Clearing:</strong> Removing the bushes and thickets where tsetse flies breed and rest. <em>(Source: KCSE University Express)</em></li>
                                <li><strong>Spraying Insecticides:</strong> Using chemicals to kill tsetse flies. This must be done carefully to avoid harming the environment.</li>
                                <li><strong>Trapping:</strong> Using specially designed traps, often baited, to capture and kill tsetse flies.</li>
                                <li><strong>Sterile Insect Technique (SIT):</strong> Releasing sterilized male tsetse flies. When they mate with wild females, no offspring are produced, helping to reduce the fly population. <em>(Source: Ogoti- Land Reclamation and Rehabilitation)</em></li>
                            </ul>
                        </li>
                        <li><strong>Example in Kenya:</strong> Efforts to control tsetse flies in areas like Lambwe Valley (Homa Bay County) and parts of the Rift Valley to allow for livestock keeping.</li>
                    </ul>
                `
            },
            {
                id: "rehabilitation-methods",
                title: "Methods of Land Rehabilitation",
                breadcrumb: "Rehabilitation Methods",
                content: `
                    <h2>5. Methods of Land Rehabilitation</h2>
                    <p>These methods aim to restore the health and productivity of land that has been damaged.</p>

                    <h3>5.1 Afforestation and Reforestation</h3>
                    <ul>
                        <li><strong>Objective:</strong> To plant trees on degraded land.
                            <ul>
                                <li><strong>Afforestation:</strong> Planting trees in an area where there was no forest before.</li>
                                <li><strong>Reforestation:</strong> Replanting trees in an area where a forest previously existed but was cleared.</li>
                            </ul>
                        </li>
                        <li><strong>Benefits:</strong>
                            <ul>
                                <li>Controls soil erosion (tree roots bind soil, canopy protects from rain).</li>
                                <li>Improves soil fertility (leaf litter decomposes into humus).</li>
                                <li>Protects water catchment areas.</li>
                                <li>Can improve local climate (more moisture, less wind).</li>
                                <li>Provides timber, fuel wood, and other forest products.</li>
                                <li>Creates habitats for wildlife.</li>
                            </ul>
                        </li>
                        <li><strong>Examples in Kenya:</strong> The Green Belt Movement, government tree-planting programs in areas like the Mau Forest, Aberdares, and Mt. Kenya.</li>
                    </ul>
                    <div class="diagram-placeholder">
                        <img src="https://placehold.co/600x300/e9ecef/6c757d?text=Diagram:+Afforestation+on+Degraded+Slope" alt="Diagram: Afforestation on Degraded Slope">
                        <p>Illustrating tree planting on a degraded hillside to control erosion and restore vegetation.</p>
                    </div>

                    <h3>5.2 Soil Conservation Measures</h3>
                    <p>These are techniques used to prevent or reduce soil erosion, especially on sloping land.</p>
                    <ul>
                        <li><strong>Terracing:</strong> Creating step-like platforms on hillsides. This slows down runoff, reduces its erosive power, and allows water to soak into the soil. <em>(Source: Ogoti- Land Reclamation and Rehabilitation)</em></li>
                        <li><strong>Contour Ploughing:</strong> Ploughing along the contours of a slope (i.e., across the slope) instead of up and down. The furrows trap water and reduce erosion.</li>
                        <li><strong>Gabions:</strong> Wire mesh cages filled with stones, built across gullies or small stream channels. They slow down water flow, trap soil, and help stabilize gullies. <em>(Source: Ogoti- Land Reclamation and Rehabilitation)</em></li>
                        <li><strong>Bunds:</strong> Small earth or stone embankments built along contours to hold back rainwater and allow it to infiltrate the soil. <em>(Source: Ogoti- Land Reclamation and Rehabilitation)</em></li>
                        <li><strong>Cover Cropping:</strong> Planting crops like beans, sweet potatoes, or desmodium that spread and cover the soil, protecting it from rain and wind erosion. <em>(Source: Geography Notes Form 4)</em></li>
                        <li><strong>Mulching:</strong> Covering the soil with a layer of organic material (like straw, grass clippings, or crop residues) or sometimes plastic sheets. Mulch protects the soil from erosion, reduces water loss through evaporation, suppresses weeds, and adds organic matter as it decomposes. <em>(Source: Geography Notes Form 4)</em></li>
                    </ul>
                    <div class="diagram-placeholder">
                        <img src="https://placehold.co/600x300/e9ecef/6c757d?text=Diagram:+Soil+Conservation+Techniques" alt="Diagram: Soil Conservation Techniques (Terraces, Contour Ploughing, Gabions)">
                        <p>Illustrating terracing, contour ploughing, and gabion construction.</p>
                    </div>

                    <h3>5.3 Restoration of Mining Sites and Quarries</h3>
                    <p>Mining and quarrying can leave large pits, waste heaps, and damaged land.</p>
                    <ul>
                        <li><strong>Objective:</strong> To make these areas safe, stable, and visually acceptable, and if possible, productive again.</li>
                        <li><strong>Techniques:</strong>
                            <ul>
                                <li><strong>Filling Pits:</strong> Abandoned pits are filled with rocks, subsoil, and then topsoil. <em>(Source: Geography Notes Form 4)</em></li>
                                <li><strong>Landscaping/Reshaping:</strong> The land is graded to create gentle, stable slopes that blend with the surrounding area and control drainage.</li>
                                <li><strong>Revegetation:</strong> Planting trees, shrubs, and grasses that are suitable for the conditions to stabilize the soil and restore some ecological function.</li>
                            </ul>
                        </li>
                        <li><strong>Example in Kenya:</strong> <strong>Haller Park (formerly Bamburi Nature Trail) in Mombasa.</strong> This is a world-famous example of how a barren limestone quarry was transformed into a beautiful nature park with forests, lakes, and wildlife. <em>(Source: EasyElimu)</em></li>
                    </ul>

                    <h3>5.4 Improving Soil Fertility</h3>
                    <p>Land can become infertile due to continuous cropping without replenishing nutrients.</p>
                    <ul>
                        <li><strong>Objective:</strong> To restore or increase the nutrient content and health of the soil.</li>
                        <li><strong>Techniques:</strong>
                            <ul>
                                <li><strong>Application of Manure:</strong> Using animal waste (farmyard manure) or compost to add organic matter and nutrients to the soil. <em>(Source: Ogoti- Land Reclamation and Rehabilitation)</em></li>
                                <li><strong>Use of Fertilizers:</strong> Applying chemical (inorganic) fertilizers to supply specific nutrients like Nitrogen (N), Phosphorus (P), and Potassium (K) that crops need.</li>
                                <li><strong>Crop Rotation:</strong> Planting different types of crops on the same land in a planned sequence. This helps to maintain soil fertility because different crops have different nutrient needs, and some (like beans) can add nitrogen to the soil.</li>
                                <li><strong>Intercropping:</strong> Growing two or more crops together on the same piece of land, which can improve soil fertility and reduce pests.</li>
                                <li><strong>Agroforestry:</strong> Combining trees with crops and/or livestock. Trees can help improve soil fertility through leaf litter and nitrogen fixation (if they are leguminous species).</li>
                            </ul>
                        </li>
                    </ul>

                    <h3>5.5 Controlled Grazing</h3>
                    <p>Overgrazing (too many animals on too little land) can lead to soil erosion and land degradation.</p>
                    <ul>
                        <li><strong>Objective:</strong> To manage livestock grazing to prevent land damage and allow pastures to recover.</li>
                        <li><strong>Techniques:</strong>
                            <ul>
                                <li><strong>Rotational Grazing:</strong> Dividing grazing land into paddocks and moving animals from one paddock to another, allowing grazed areas time to regrow.</li>
                                <li><strong>Matching Stocking Rate to Carrying Capacity:</strong> Ensuring the number of animals is not too high for the amount of pasture available.</li>
                                <li><strong>Establishing Ranches:</strong> Fenced areas where grazing can be better managed.</li>
                                <li><strong>Reseeding Pastures:</strong> Planting improved grass species to increase fodder availability.</li>
                            </ul>
                        </li>
                    </ul>
                `
            },
            {
                id: "case-studies",
                title: "Case Studies (KCSE Focus)",
                breadcrumb: "Case Studies",
                content: `
                    <h2>6. Case Studies (KCSE Focus)</h2>

                    <h3>6.1 Land Reclamation in Kenya</h3>
                    <h4>A. Mwea Irrigation Scheme</h4>
                    <ul>
                        <li><strong>Location:</strong> Kirinyaga County, on the Mwea plains, using water from the Thiba and Nyamindi rivers.</li>
                        <li><strong>Main Crop:</strong> Paddy Rice.</li>
                        <li><strong>Objectives when started:</strong>
                            <ul>
                                <li>To reclaim the black cotton soils of the Mwea plains for agriculture.</li>
                                <li>To settle landless people (especially former detainees).</li>
                                <li>To increase rice production for Kenya.</li>
                                <li>To create employment.</li>
                            </ul>
                        </li>
                        <li><strong>Factors that favoured its location:</strong>
                            <ul>
                                <li>Availability of water from perennial rivers (Thiba and Nyamindi).</li>
                                <li>Gently sloping land allowing for gravity-flow irrigation.</li>
                                <li>Impermeable black cotton soils ideal for water retention needed for rice.</li>
                                <li>Warm climate suitable for rice.</li>
                                <li>Availability of extensive land.</li>
                            </ul>
                        </li>
                        <li><strong>Benefits/Successes:</strong>
                            <ul>
                                <li>Major rice producer for Kenya.</li>
                                <li>Settlement for many families.</li>
                                <li>Employment creation.</li>
                                <li>Development of infrastructure (towns like Wang'uru, roads, schools).</li>
                            </ul>
                        </li>
                        <li><strong>Problems Faced:</strong>
                            <ul>
                                <li>Water shortages, especially during droughts.</li>
                                <li>Pests (e.g., Quelea birds) and diseases affecting rice.</li>
                                <li>Siltation of canals.</li>
                                <li>High cost of farm inputs.</li>
                                <li>Issues with farmer payments and management in the past.</li>
                            </ul>
                        </li>
                        <li><em>(Source: Geography Notes Form 4; KCSE University Express; Ogoti- Land Reclamation and Rehabilitation)</em></li>
                    </ul>
                    <div class="diagram-placeholder">
                        <img src="https://placehold.co/600x300/e9ecef/6c757d?text=Map:+Mwea+Irrigation+Scheme+Layout" alt="Map: Mwea Irrigation Scheme Layout">
                        <p>Conceptual map showing the layout of the Mwea Irrigation Scheme, including rivers and canal networks.</p>
                    </div>

                    <h4>B. Perkerra Irrigation Scheme</h4>
                    <ul>
                        <li><strong>Location:</strong> Baringo County, using water from the Perkerra River.</li>
                        <li><strong>Main Crops:</strong> Initially onions and chilies; later seed maize, pawpaws, watermelons.</li>
                        <li><strong>Objectives:</strong>
                            <ul>
                                <li>To use Perkerra River water for farming in a dry area.</li>
                                <li>To settle local pastoral communities.</li>
                                <li>To control floods from the Perkerra River.</li>
                            </ul>
                        </li>
                        <li><strong>Benefits:</strong> Provides income and food in an arid region, employment.</li>
                        <li><strong>Problems:</strong>
                            <ul>
                                <li>Unreliable water supply from the Perkerra River.</li>
                                <li>Siltation of canals and the Marigat dam.</li>
                                <li>Pests and diseases.</li>
                                <li>Marketing difficulties for produce.</li>
                            </ul>
                        </li>
                        <li><em>(Source: EasyElimu)</em></li>
                    </ul>

                    <h3>6.2 Land Reclamation in the Netherlands (Polders)</h3>
                    <ul>
                        <li><strong>Background:</strong> Much of the Netherlands is below sea level. The Dutch have reclaimed large areas of land from the sea and lakes, called <strong>polders</strong>.</li>
                        <li><strong>Process:</strong>
                            <ol>
                                <li><strong>Dykes:</strong> Strong walls (dykes) are built to enclose an area of water.</li>
                                <li><strong>Pumping:</strong> Water is pumped out of the enclosed area (traditionally using windmills, now electric pumps).</li>
                                <li><strong>Drainage:</strong> A network of canals and ditches is created to manage water levels.</li>
                                <li><strong>Soil Treatment:</strong> The soil, often salty, is treated over time (e.g., by planting reeds) to make it suitable for farming.</li>
                            </ol>
                        </li>
                        <li><strong>Significance:</strong>
                            <ul>
                                <li>Greatly increased land area for farming and settlement.</li>
                                <li>Created highly fertile agricultural land.</li>
                                <li>Advanced flood protection.</li>
                            </ul>
                        </li>
                        <li><strong>Challenges:</strong> Constant pumping needed, cost of maintaining dykes, land subsidence.</li>
                        <li><em>(Source: EasyElimu)</em></li>
                    </ul>
                    <div class="diagram-placeholder">
                        <img src="https://placehold.co/600x300/e9ecef/6c757d?text=Diagram:+Polder+Creation+Process" alt="Diagram: Polder Creation Process (Dykes, Pumping, Drainage)">
                        <p>Illustrating the stages of polder creation: building dykes, pumping water, and establishing drainage.</p>
                    </div>

                    <h3>6.3 Land Rehabilitation in Kenya: Haller Park, Mombasa</h3>
                    <ul>
                        <li><strong>Background:</strong> A former limestone quarry used by Bamburi Cement, which became a barren wasteland.</li>
                        <li><strong>Rehabilitation Process:</strong>
                            <ul>
                                <li>Pioneering work started in the 1970s.</li>
                                <li>Hardy casuarina trees were planted first as they could survive the poor, alkaline soil.</li>
                                <li>Millipedes were introduced to feed on casuarina needles, helping to create topsoil.</li>
                                <li>As soil improved, other plants and trees were introduced.</li>
                                <li>Lakes and fish farms were created in the quarry pits.</li>
                                <li>Animals like hippos, giraffes, antelopes, and crocodiles were introduced.</li>
                            </ul>
                        </li>
                        <li><strong>Significance:</strong>
                            <ul>
                                <li>A successful example of transforming a derelict industrial site into a thriving ecosystem and nature park.</li>
                                <li>Important for conservation, education, and tourism.</li>
                            </ul>
                        </li>
                        <li><em>(Source: EasyElimu)</em></li>
                    </ul>
                    <div class="diagram-placeholder">
                        <img src="https://placehold.co/600x300/e9ecef/6c757d?text=Diagram:+Haller+Park+Transformation" alt="Diagram: Haller Park - From Quarry to Nature Park">
                        <p>Conceptual before-and-after of Haller Park: barren quarry vs. rehabilitated nature park.</p>
                    </div>
                `
            },
            {
                id: "challenges",
                title: "Challenges in Kenya",
                breadcrumb: "Challenges",
                content: `
                    <h2>7. Challenges Facing Land Reclamation and Rehabilitation in Kenya</h2>
                    <ol>
                        <li><strong>High Cost:</strong> These projects require large amounts of money for machinery, materials, labor, and expertise.</li>
                        <li><strong>Lack of Technical Know-How:</strong> Specialized skills are needed, which may not always be readily available.</li>
                        <li><strong>Inadequate Capital/Funding:</strong> Limited financial resources can slow down or halt projects.</li>
                        <li><strong>Pests and Diseases:</strong> Can affect crops in newly reclaimed areas or animals in rehabilitated zones.</li>
                        <li><strong>Environmental Challenges:</strong>
                            <ul>
                                <li><strong>Salinization:</strong> In irrigation schemes, if drainage is poor, salts can build up in the soil, making it infertile. Example: $\\text{Na}^+ + \\text{Cl}^- \\rightarrow \\text{NaCl (salt)}$</li>
                                <li><strong>Waterlogging:</strong> Excess irrigation water can saturate the soil, harming crops.</li>
                                <li><strong>Siltation:</strong> Dams and canals can fill up with silt, reducing their effectiveness.</li>
                            </ul>
                        </li>
                        <li><strong>Social Issues:</strong>
                            <ul>
                                <li>Displacement of people to create space for projects.</li>
                                <li>Conflicts over water use or land ownership.</li>
                                <li>Sometimes, local communities may not fully benefit from the projects.</li>
                            </ul>
                        </li>
                        <li><strong>Climate Change:</strong> Unreliable rainfall and droughts can affect water supply for irrigation schemes.</li>
                    </ol>
                `
            },
            {
                id: "conclusion",
                title: "Conclusion",
                breadcrumb: "Conclusion",
                content: `
                    <h2>8. Conclusion</h2>
                    <p>Land reclamation and rehabilitation are essential for sustainable development in Kenya and globally. They offer ways to increase food production, provide land for people, restore damaged environments, and boost economies. However, these projects must be carefully planned, adequately funded, and implemented with consideration for both the environment and the local communities to ensure their long-term success and benefits. For KCSE students, understanding the principles, methods, and real-world examples of these processes is key to appreciating how geography contributes to solving pressing land use and environmental challenges.</p>
                `
            },
            {
                id: "revision",
                title: "Revision Questions",
                breadcrumb: "Revision",
                content: `
                    <h2>Revision Questions</h2>
                    <p>Test your understanding of Land Reclamation and Rehabilitation with these questions.</p>
                    <div id="revision-questions-container">
                        </div>
                `
            }
        ];

        // Revision Questions Data (at least 43 questions)
        const revisionQuestionsData = [
            { q: "1. Define land reclamation.", a: "Land reclamation is the process of converting unproductive land (wasteland) into land that can be used for productive purposes like farming, settlement, or industry." },
            { q: "2. Define land rehabilitation.", a: "Land rehabilitation is the process of restoring land that has been damaged or degraded by human activities or natural disasters back to a useful and productive state." },
            { q: "3. State two main differences between land reclamation and land rehabilitation.", a: "1. Reclamation often creates 'new' usable land from previously unusable areas (like swamps or sea), while rehabilitation repairs 'damaged' land that was once productive. 2. Reclamation may involve significant alteration of ecosystems, while rehabilitation aims to restore ecological functions." },
            { q: "4. Give three reasons why land reclamation is important in Kenya.", a: "1. To increase land for food production. 2. To provide land for settlement due to population growth. 3. To control pests and diseases found in wastelands like swamps." },
            { q: "5. State three reasons for undertaking land rehabilitation.", a: "1. To restore derelict land (e.g., from mining). 2. For environmental conservation (e.g., control soil erosion, protect water catchments). 3. To improve the aesthetic value of degraded landscapes." },
            { q: "6. Name two examples of wastelands that can be reclaimed.", a: "Swamps/marshes, arid/semi-arid lands (deserts)." },
            { q: "7. Name two examples of degraded land that can be rehabilitated.", a: "Abandoned mine sites/quarries, deforested areas." },
            { q: "8. Describe one method used for draining swamps in Kenya.", a: "Digging open ditches/canals: These channels are dug to allow excess water to flow away from the swampy area by gravity, lowering the water table." },
            { q: "9. How can planting eucalyptus trees help in reclaiming swampy areas?", a: "Eucalyptus trees have high water uptake rates (transpiration), so planting them around swamps can help absorb excess water and dry out the land." },
            { q: "10. What is irrigation?", a: "Irrigation is the artificial supply of water to land to support crop growth, especially in areas with insufficient rainfall." },
            { q: "11. Name three methods of irrigation commonly used in Kenya.", a: "Flood/Basin irrigation, Sprinkler/Overhead irrigation, Drip/Trickle irrigation. (Also: Water lifting, Canal/Furrow irrigation)." },
            { q: "12. State one advantage of drip irrigation.", a: "It is very efficient in water use as water is supplied slowly and directly to the plant roots, minimizing wastage through evaporation or runoff." },
            { q: "13. State one disadvantage of flood irrigation.", a: "It can be wasteful of water due to high evaporation and runoff, and can lead to waterlogging or salinization if drainage is poor." },
            { q: "14. Name two irrigation schemes in Kenya.", a: "Mwea Irrigation Scheme, Perkerra Irrigation Scheme. (Also: Bura, Hola)." },
            { q: "15. What is the main crop grown in the Mwea Irrigation Scheme?", a: "Paddy Rice." },
            { q: "16. State two objectives for the establishment of the Mwea Irrigation Scheme.", a: "1. To reclaim the black cotton soils for agriculture. 2. To settle landless people and create employment." },
            { q: "17. Identify two physical factors that favoured the location of the Mwea Irrigation Scheme.", a: "1. Availability of water from the perennial Thiba and Nyamindi rivers. 2. Gently sloping land allowing for gravity-flow irrigation. (Also: impermeable black cotton soils, warm climate)." },
            { q: "18. State two problems faced by the Mwea Irrigation Scheme.", a: "1. Water shortages, especially during droughts. 2. Pests (e.g., Quelea birds) and diseases affecting rice. (Also: siltation, high input costs)." },
            { q: "19. What is a polder?", a: "A polder is a low-lying tract of land reclaimed from a body of water (like the sea or a lake) and protected by dykes." },
            { q: "20. Name one country famous for using polders for land reclamation.", a: "The Netherlands." },
            { q: "21. Describe one technique used in tsetse fly control as a method of land reclamation.", a: "Bush Clearing: This involves removing bushes and thickets that serve as breeding grounds and resting places for tsetse flies, thus reducing their population." },
            { q: "22. What is afforestation?", a: "Afforestation is the planting of trees in an area where there was no forest before." },
            { q: "23. What is reforestation?", a: "Reforestation is the replanting of trees in an area where a forest previously existed but was cleared." },
            { q: "24. State two benefits of afforestation/reforestation.", a: "1. Controls soil erosion. 2. Improves soil fertility through humus from leaf litter." },
            { q: "25. What is terracing?", a: "Terracing is the creation of step-like platforms on hillsides to slow down runoff, reduce soil erosion, and allow water to infiltrate the soil." },
            { q: "26. How does contour ploughing help in soil conservation?", a: "Ploughing along the contours of a slope creates ridges that trap water and prevent it from flowing straight downhill, thus reducing soil erosion." },
            { q: "27. What are gabions used for in land rehabilitation?", a: "Gabions (wire mesh cages filled with stones) are built across gullies to slow down water flow, trap sediment, and help stabilize the gully, preventing further erosion." },
            { q: "28. Define mulching.", a: "Mulching is the practice of covering the soil with a layer of organic material (like straw or crop residues) or inorganic material (like plastic sheets)." },
            { q: "29. State two advantages of mulching.", a: "1. Protects the soil from erosion by reducing raindrop impact and wind. 2. Conserves soil moisture by reducing evaporation." },
            { q: "30. Describe one method used to rehabilitate abandoned quarries.", a: "Filling Pits: The abandoned pits are filled with rocks, subsoil, and then topsoil. After this, revegetation by planting trees and grasses can occur to stabilize the land." },
            { q: "31. Name the rehabilitated quarry site in Mombasa famous for its ecological restoration.", a: "Haller Park (formerly Bamburi Nature Trail)." },
            { q: "32. How was soil created in the initial stages of Haller Park's rehabilitation?", a: "Hardy casuarina trees were planted, and millipedes were introduced. The millipedes fed on the fallen casuarina needles, breaking them down and, along with nitrogen-fixing bacteria, helped create topsoil (humus)." },
            { q: "33. State two ways of improving soil fertility on degraded land.", a: "1. Application of organic manure or compost. 2. Use of inorganic fertilizers." },
            { q: "34. What is crop rotation?", a: "Crop rotation is the practice of planting different types of crops on the same land in a planned sequence to help maintain soil fertility and control pests/diseases." },
            { q: "35. How does controlled grazing help in land rehabilitation?", a: "It prevents overgrazing by managing the number of animals and the duration they graze in an area, allowing pastures to recover and protecting the soil from erosion." },
            { q: "36. State one challenge facing land reclamation projects in Kenya.", a: "High initial cost and inadequate capital/funding." },
            { q: "37. What is salinization in the context of irrigation schemes?", a: "Salinization is the build-up of salts in the topsoil, often occurring in irrigated areas with poor drainage in arid/semi-arid climates, making the land infertile." },
            { q: "38. How can siltation affect an irrigation scheme?", a: "Silt (soil particles carried by water) can deposit in irrigation canals and dams, reducing their water-carrying capacity and efficiency, requiring costly removal." },
            { q: "39. Give one social issue that can arise from land reclamation projects.", a: "Displacement of people from their original lands to create space for the project, which can lead to conflicts if not handled properly." },
            { q: "40. Why is community participation important for the success of land rehabilitation projects?", a: "It fosters a sense of ownership and responsibility among local communities, making them more likely to maintain and sustain the rehabilitated land and its benefits in the long term." },
            { q: "41. State one objective of the Perkerra Irrigation Scheme.", a: "To utilize the waters of the Perkerra River for agricultural production in an arid/semi-arid area OR to settle local pastoral communities as farmers." },
            { q: "42. Name one problem faced by the Perkerra Irrigation Scheme.", a: "Unreliable water supply from the Perkerra River OR siltation of canals and the Marigat dam." },
            { q: "43. What is the main environmental concern associated with draining large swamps?", a: "Loss of wetland biodiversity and disruption of hydrological cycles." },
            { q: "44. How can land rehabilitation contribute to mitigating climate change?", a: "Through afforestation and reforestation, which sequester atmospheric carbon dioxide, and by improving soil health which can also store more carbon." },
            { q: "45. What is the role of a 'key' or 'legend' in interpreting maps related to land use?", a: "The key or legend explains the meaning of symbols, colors, or shading patterns used on the map, making it possible to understand the information being presented." }
        ];
    </script>

    <script>
        // script.js - Handles the interactivity of the learning guide
        document.addEventListener('DOMContentLoaded', () => {
            const sidebarNav = document.getElementById('sidebar-nav');
            const contentArea = document.getElementById('content-area');
            const mainTitle = document.getElementById('main-title');
            const breadcrumbTrail = document.getElementById('breadcrumb-trail');
            const prevButton = document.getElementById('prev-button');
            const nextButton = document.getElementById('next-button');
            const menuToggle = document.getElementById('menu-toggle');
            const wrapper = document.getElementById('wrapper');

            let currentSectionIndex = -1; // No section selected initially

            // --- 1. Content Loading and Sidebar Generation ---
            function generateSidebar() {
                guideData.forEach((section, index) => {
                    const link = document.createElement('a');
                    link.href = `#${section.id}`;
                    link.classList.add('list-group-item', 'list-group-item-action', 'list-group-item-light', 'p-3');
                    link.textContent = section.title;
                    link.setAttribute('role', 'button');
                    link.setAttribute('tabindex', '0'); // For keyboard accessibility
                    link.dataset.index = index;

                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        loadSection(index);
                        if (window.innerWidth < 992) { // Close sidebar on mobile after click
                            wrapper.classList.remove('toggled');
                        }
                    });
                    link.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            loadSection(index);
                            if (window.innerWidth < 992) {
                                wrapper.classList.remove('toggled');
                            }
                        }
                    });
                    sidebarNav.appendChild(link);
                });
            }

            function loadSection(index) {
                if (index < 0 || index >= guideData.length) {
                    console.error("Invalid section index:", index);
                    return;
                }

                currentSectionIndex = index;
                const section = guideData[index];

                mainTitle.textContent = section.title; 
                contentArea.innerHTML = section.content; 

                updateBreadcrumbs(section.breadcrumb);
                updateNavigationButtons();
                updateActiveSidebarLink();
                saveProgress();

                // Typeset MathJax content
                if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
                    MathJax.typesetPromise([contentArea]).catch(function (err) {
                        console.error('MathJax Typesetting Error:', err);
                    });
                } else if (typeof MathJax !== 'undefined' && MathJax.Hub && MathJax.Hub.Queue) {
                    // Fallback for MathJax v2 if typesetPromise is not available
                    MathJax.Hub.Queue(["Typeset", MathJax.Hub, contentArea]);
                }


                // If it's the revision section, render questions
                if (section.id === "revision") {
                    renderRevisionQuestions();
                }
                
                // Scroll to top of content area
                contentArea.scrollTop = 0;
                document.getElementById('page-content-wrapper').scrollTop = 0; 
            }

            // --- 2. Navigation System ---
            menuToggle.addEventListener('click', () => {
                wrapper.classList.toggle('toggled');
            });

            prevButton.addEventListener('click', () => {
                if (currentSectionIndex > 0) {
                    loadSection(currentSectionIndex - 1);
                }
            });
            prevButton.addEventListener('keydown', (e) => {
                if ((e.key === 'Enter' || e.key === ' ') && currentSectionIndex > 0) {
                    e.preventDefault();
                    loadSection(currentSectionIndex - 1);
                }
            });


            nextButton.addEventListener('click', () => {
                if (currentSectionIndex < guideData.length - 1) {
                    loadSection(currentSectionIndex + 1);
                }
            });
             nextButton.addEventListener('keydown', (e) => {
                if ((e.key === 'Enter' || e.key === ' ') && currentSectionIndex < guideData.length - 1) {
                    e.preventDefault();
                    loadSection(currentSectionIndex + 1);
                }
            });


            function updateNavigationButtons() {
                prevButton.disabled = currentSectionIndex <= 0;
                nextButton.disabled = currentSectionIndex >= guideData.length - 1;
            }

            function updateActiveSidebarLink() {
                const links = sidebarNav.querySelectorAll('.list-group-item');
                links.forEach((link, idx) => {
                    if (idx === currentSectionIndex) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
            }

            function updateBreadcrumbs(breadcrumbText) {
                breadcrumbTrail.innerHTML = ''; // Clear existing
                const homeLi = document.createElement('li');
                homeLi.classList.add('breadcrumb-item');
                const homeLink = document.createElement('a');
                homeLink.href = '#';
                homeLink.textContent = 'Home';
                homeLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    currentSectionIndex = -1;
                    mainTitle.textContent = "Welcome";
                    contentArea.innerHTML = "<p>Select a topic from the menu to begin.</p>";
                    updateBreadcrumbs("Home");
                    updateNavigationButtons();
                    updateActiveSidebarLink();
                    sessionStorage.removeItem('currentSectionIndex');
                });
                homeLi.appendChild(homeLink);
                breadcrumbTrail.appendChild(homeLi);

                if (breadcrumbText && breadcrumbText !== "Home" && currentSectionIndex !== -1) {
                    const activeLi = document.createElement('li');
                    activeLi.classList.add('breadcrumb-item', 'active');
                    activeLi.setAttribute('aria-current', 'page');
                    activeLi.textContent = breadcrumbText;
                    breadcrumbTrail.appendChild(activeLi);
                }
            }

            // --- 3. Revision Section ---
            function renderRevisionQuestions() {
                const container = document.getElementById('revision-questions-container');
                if (!container) {
                    console.error("Revision questions container not found.");
                    return;
                }
                container.innerHTML = ''; // Clear previous

                revisionQuestionsData.forEach((item, index) => {
                    const questionId = `question-${index}`;
                    const answerId = `answer-${index}`;

                    const questionDiv = document.createElement('div');
                    questionDiv.classList.add('revision-question-item');

                    const header = document.createElement('div');
                    header.classList.add('revision-question-header');
                    header.setAttribute('data-bs-toggle', 'collapse');
                    header.setAttribute('data-bs-target', `#${answerId}`);
                    header.setAttribute('aria-expanded', 'false');
                    header.setAttribute('aria-controls', answerId);
                    header.setAttribute('role', 'button');
                    header.setAttribute('tabindex', '0'); 
                    header.innerHTML = `
                        <span>${item.q}</span>
                        <span class="arrow-icon">&#9662;</span> `;

                    const answerDiv = document.createElement('div');
                    answerDiv.id = answerId;
                    answerDiv.classList.add('revision-answer', 'collapse');
                    answerDiv.innerHTML = `<p>${item.a}</p>`;

                    questionDiv.appendChild(header);
                    questionDiv.appendChild(answerDiv);
                    container.appendChild(questionDiv);

                    header.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            new bootstrap.Collapse(answerDiv).toggle(); 
                        }
                    });
                    
                    answerDiv.addEventListener('show.bs.collapse', function () {
                        header.querySelector('.arrow-icon').innerHTML = '&#9652;'; // Up arrow
                    });
                    answerDiv.addEventListener('hide.bs.collapse', function () {
                        header.querySelector('.arrow-icon').innerHTML = '&#9662;'; // Down arrow
                    });
                });
            }

            // --- 4. Persistent Progress Tracking ---
            function saveProgress() {
                if (currentSectionIndex !== -1) {
                    sessionStorage.setItem('currentSectionIndex', currentSectionIndex);
                }
            }

            function loadProgress() {
                const savedIndex = sessionStorage.getItem('currentSectionIndex');
                if (savedIndex !== null && savedIndex >= 0 && savedIndex < guideData.length) {
                    loadSection(parseInt(savedIndex, 10));
                } else {
                    loadSection(0); 
                }
            }

            // --- Initial Setup ---
            generateSidebar();
            loadProgress(); 
            // Initial breadcrumb update after loading progress
            if(currentSectionIndex !== -1 && guideData[currentSectionIndex]){
                 updateBreadcrumbs(guideData[currentSectionIndex].breadcrumb);
            } else {
                 updateBreadcrumbs("Home");
            }
        });
    </script>
</body>
</html>
